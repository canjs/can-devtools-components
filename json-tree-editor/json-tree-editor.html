<!doctype html>
<html>
	<head>
		<style>
			textarea {
				width: 400px;
				height: 350px;
			}
		</style>
	</head>
	<body>
		<textarea></textarea>
		<hr>
		<json-tree-editor></json-tree-editor>

		<script src="../node_modules/steal/steal.js" main="can-devtools-components/json-tree-editor/json-tree-editor">
			const treeEditor = document.querySelector("json-tree-editor")
			const textarea = document.querySelector("textarea");

			const vm = treeEditor.viewModel;

			vm.json = {
				nullProp: null,
				emptyString: "",
				name: {
					first: "Connor",
					last: "Phillips"
				},
				hobbies: [{
					name: "spinning around",
					rank: 1
				}, {
					name: "kicking the ball",
					rank: 2
				}, {
					name: "dunking it",
					rank: 3
				}],
				element: {},
				recursive: {},
				warning: "something??"
			};

			vm.typeNames = {
				hobbies: "Hobbies",
				element: "HTMLParagraphElement",
				recursive: "Object"
			};

			vm.messages = {
				element: {
					type: "info",
					message: "CanJS Devtools does not expand HTML Elements"
				},
				recursive: {
					type: "error",
					message: 'Error getting value of "recursive": Maximum stack size exceeded'
				},
				warning: {
					type: "warning",
					message: 'A Warning?'
				}
			};

			(function updateTextAreaValue() {
				textarea.value = JSON.stringify(vm.json, null, "\t");
				setTimeout(updateTextAreaValue, 50);
			}());

			textarea.addEventListener("change", (ev) => {
				vm.json = JSON.parse(ev.target.value);
			});
		</script>
	</body>
</html>
